<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@thi.ng/rstream](./rstream.md) &gt; [metaStream](./rstream.metastream.md)

## metaStream variable

A `MetaStream` is a subscription type which transforms each incoming value into a new stream, subscribes to it (via an hidden / internal subscription) and then only passes values from that stream to its own subscribers. If a new value is received, the meta stream first unsubscribes from any still active stream, before creating and subscribing to the new stream. Hence this stream type is useful for cases where streams need to be dynamically created &amp; inserted into an existing dataflow topology.

The user supplied `factory` function will be called for each incoming value and is responsible for creating the new stream instances. If the function returns null/undefined, no further action will be taken (acts like a filter transducer).

```
// transform each received odd number into a stream
// producing 3 copies of that number in the metastream
// even numbers are ignored
a = metastream((x) => (x & 1) ? fromIterable(tx.repeat(x, 3), 100) : null)

a.subscribe(trace())
a.next(23)

// 23
// 23
// 23

a.next(42) // ignored by factory fn

a.next(43)
// 43
// 43
// 43

```
The factory function does NOT need to create new streams, but can only merely return other existing streams, and so making the meta stream act like a switch.

If the meta stream is the only subscriber to these input streams, you'll need to add a dummy subscription to each in order to keep them alive and support dynamic switching between them. See issue \#74

```ts
a = fromIterable(tx.repeat("a"), 1000);
b = fromIterable(tx.repeat("b"), 1000);

// dummy subscriptions
a.subscribe({})
b.subscribe({})

m = metaStream((x) => x ? a : b);
m.subscribe(trace("meta from: "));

m.next(true);
// meta from: a

m.next(false);
// meta from: b

m.next(true);
// meta from: a

```

<b>Signature:</b>

```typescript
metaStream: <A, B>(factory: Fn<A, Subscription<B, B>>, id?: string | undefined) => MetaStream<A, B>
```

<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@thi.ng/interceptors](./interceptors.md) &gt; [snapshot](./interceptors.snapshot.md)

## snapshot variable

Higher-order interceptor. Returns interceptor which calls `ctx[id].record()`<!-- -->, where `ctx` is the currently active [InterceptorContext](./interceptors.interceptorcontext.md) passed to all event handlers and `ctx[id]` is assumed to be a [History](./atom.history.md) instance, passed to [EventBus.processQueue()](./interceptors.eventbus.processqueue.md)<!-- -->. The default ID for the history instance is `"history"`<!-- -->.

Example usage:

<b>Signature:</b>

```typescript
snapshot: (id?: string) => InterceptorFn
```

## Example


```ts
state = new Atom({});
history = new History(state);
bus = new EventBus(state);
// register event handler
// each time the `foo` event is triggered, a snapshot of
// current app state is recorded first
bus.addHandlers({
 foo: [snapshot(), valueSetter("foo")]
});
...
// trigger event
bus.dispatch(["foo", 23]);

// pass history instance via interceptor context to handlers
bus.processQueue({ history });

```


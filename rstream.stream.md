<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@thi.ng/rstream](./rstream.md) &gt; [stream](./rstream.stream.md)

## stream() function

Creates a new [Stream](./rstream.stream.md) instance, optionally with given [StreamSource](./rstream.streamsource.md) function and / or ID. If a `src` function is provided, the function will be only called (with the [Stream](./rstream.stream.md) instance as single argument) once the first subscriber has attached to the stream. If the function returns another function, it will be used for cleanup purposes if the stream is cancelled, e.g. if the last subscriber has unsubscribed. Streams are intended as (primarily async) data sources in a dataflow graph and are the primary construct for the various `from*()` functions provided by the package. However, streams can also be triggered manually (from outside the stream), in which case the user should call `stream.next()` to cause value propagation.

<b>Signature:</b>

```typescript
export declare function stream<T>(): Stream<T>;
```
<b>Returns:</b>

`Stream<T>`

## Example


```ts
a = rs.stream((s) => {
    s.next(1);
    s.next(2);
    s.done()
});
a.subscribe(trace("a"))
// a 1
// a 2
// a done

// as reactive value mechanism
b = rs.stream();
// or alternatively
// b = rs.subscription();

b.subscribe(trace("b1"));
b.subscribe(trace("b2"));

// external trigger
b.next(42);
// b1 42
// b2 42

```
[Stream](./rstream.stream.md)<!-- -->s (like [Subscription](./rstream.subscription.md)<!-- -->s) implement the [IDeref](./api.ideref.md) interface which provides read access to a stream's last received value. This is useful for various purposes, e.g. in combination with [@thi.ng/hdom](./hdom.md)<!-- -->, which supports direct embedding of streams (i.e. their values) into UI components (and will be deref'd automatically). If the stream has not yet emitted a value or if the stream is done, it will deref to `undefined`<!-- -->.

